<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Ascent - Vehicle Tracking</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
        body { font-family: Arial, sans-serif; background:#f5f5f5; }
        main { max-width:900px; margin:40px auto; padding:0 24px; }
        .button-grid { display:grid; gap:22px; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); }
        .btn { padding:18px 26px; font-size:18px; border:none; border-radius:8px; cursor:pointer; text-decoration:none; text-align:center; transition:background-color .25s, transform .2s; box-shadow:0 2px 4px rgba(0,0,0,.08); }
        .btn:active { transform:scale(.97); }
        .view-btn { background:#007bff; color:#fff; }
        .view-btn:hover { background:#0056b3; }
        .red-btn { background:#dc3545; color:#fff; }
        .red-btn:hover { background:#c82333; }
        h1 { font-weight:600; margin:0 0 32px; font-size:clamp(1.8rem,4vw,2.4rem); letter-spacing:.5px; }
        .note { margin-top:40px; font-size:14px; color:#555; }
    </style>
</head>
<body>
    {% include 'partials/header.html' %}
    <main>
        <h1>DEBUG OPTIONS</h1>
        <div class="button-grid">
            <button onclick="clearDatabase()" class="btn red-btn">Clear Database</button>
            <button onclick="updateDatabase()" class="btn red-btn">Update Database</button>
        </div>
        <p class="note">Use the navigation bar for other pages. Clearing the database cannot be undone.</p>
    </main>
    <script>
        async function clearDatabase(){
            if(!confirm('Clear ALL telemetry records? This action is irreversible.')) return;
            try {
                const response = await fetch("{{ url_for('clear_database') }}", { method:'POST' });
                const result = await response.json();
                if(response.ok){ alert('Database cleared successfully'); }
                else { alert('Error: ' + (result.error || 'Unknown')); }
            } catch(err){ alert('Failed to clear database: ' + err); }
        }
        async function updateDatabase(){
            if(!confirm('Update the database with new telemetry data? This will compute for entries with missing data.')) return;
            try {
                const response = await fetch("{{ url_for('update_database') }}", { method:'POST' });
                const result = await response.json();
                if(response.ok){ alert('Database updated successfully'); }
                else { alert('Error: ' + (result.error || 'Unknown')); }
            } catch(err){ alert('Failed to update database: ' + err); }
        }
    </script>
</body>
</html>
